{% macro render_equipment_table(equipments, title, icon, color_class, actions_config, empty_msg="No hay equipos
registrados", now_func=none) %}
<div class="card bg-dark-card border-secondary shadow-sm mb-4">
    <div class="card-header border-secondary d-flex justify-content-between align-items-center">
        <div class="{{ color_class }} fw-bold">
            <i class="fas {{ icon }} me-2"></i> {{ title }}
        </div>
        <span class="badge bg-secondary">{{ equipments|length }}</span>
    </div>
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-dark table-hover mb-0 align-middle">
                <thead>
                    <tr>
                        <th>FR</th>
                        <th>Cliente</th>
                        <th>Equipo</th>
                        <th>Estado</th>
                        {% if 'encargado' in actions_config.columns %}<th>Encargado</th>{% endif %}
                        <th>Fecha</th>
                        <th>Días</th>
                        <th class="text-end">Acción</th>
                    </tr>
                </thead>
                <tbody>
                    {% for eq in equipments %}
                    <tr>
                        <td>
                            <span
                                class="badge {% if color_class == 'text-info' %}bg-info{% elif color_class == 'text-warning' %}bg-warning text-dark{% else %}bg-secondary{% endif %}">
                                {{ eq.fr or 'N/A' }}
                            </span>
                        </td>
                        <td>{{ eq.cliente or 'N/A' }}</td>
                        <td>
                            <span class="fw-bold">{{ eq.marca }}</span>
                            <small class="d-block text-muted">{{ eq.modelo }}</small>
                        </td>
                        <td><span class="badge bg-secondary">{{ eq.estado }}</span></td>
                        {% if 'encargado' in actions_config.columns %}<td>{{ eq.encargado or 'N/A' }}</td>{% endif %}
                        <td>{{ eq.fecha_ingreso.strftime('%d/%m/%Y') if eq.fecha_ingreso else 'N/A' }}</td>
                        <td>
                            {% if eq.fecha_ingreso %}
                            {% set dias = ((now_func or now)() - eq.fecha_ingreso).days %}
                            <span
                                class="badge {% if dias > 7 %}bg-danger{% elif dias > 5 %}bg-warning{% else %}bg-success{% endif %}">
                                {{ dias }}
                            </span>
                            {% else %}
                            -
                            {% endif %}
                        </td>
                        <td class="text-end">
                            <div class="btn-group btn-group-sm">
                                <button class="btn btn-outline-info" onclick="showInfo(this)" data-id="{{ eq.id }}"
                                    data-fr="{{ eq.fr }}" data-marca="{{ eq.marca }} {{ eq.modelo }}"
                                    data-estado="{{ eq.estado }}" data-encargado="{{ eq.encargado }}"
                                    data-fecha="{{ eq.fecha_ingreso.strftime('%Y-%m-%d') if eq.fecha_ingreso else '' }}"
                                    data-reporte="{{ eq.reporte_cliente | e }}" data-cliente="{{ eq.cliente | e }}"
                                    data-observaciones="{{ eq.observaciones | e }}" data-serie="{{ eq.serie | e }}"
                                    data-informe="{{ eq.numero_informe | e }}" data-accesorios="{{ eq.accesorios | e }}"
                                    data-condicion="{{ eq.condicion | e }}">
                                    <i class="fas fa-eye"></i>
                                </button>
                                {% if 'edit' in actions_config.actions %}
                                <button class="btn btn-outline-primary"
                                    onclick="showEditStatusModal({{ eq.id }}, '{{ eq.estado }}')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                {% endif %}
                            </div>
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="8" class="text-center text-muted py-4">{{ empty_msg }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endmacro %}